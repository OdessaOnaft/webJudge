"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}angular.module("notifyapp",["ui.router","ui.date","ngAnimate","ngSanitize","hljs"]).run(["$state","$rootScope","$location",function($state,$rootScope,$location){var path=$location.url();"/"!=path[path.length-1]&&path.indexOf("?")==-1&&(console.log(path.indexOf("?"),path,$location),$location.path(path+"/"))}]).config(["$locationProvider","$stateProvider","$urlRouterProvider","hljsServiceProvider",function($locationProvider,$stateProvider,$urlRouterProvider,hljsServiceProvider){$locationProvider.html5Mode(!0),$urlRouterProvider.when("","/"),$urlRouterProvider.when("/cabinet/","/cabinet/problems/"),$urlRouterProvider.when("/cabinet/problem/","/cabinet/problems/"),$urlRouterProvider.when("/cabinet/admin/",function($state){$state.go("cabinet.admin.child",{type:"users"})}),$urlRouterProvider.otherwise("/404/"),hljsServiceProvider.setOptions({}),$stateProvider.state("404",{url:"/404/",templateUrl:"/html/404.html"}).state("main",{url:"/",templateUrl:"/html/index.html",controller:"homeController"}).state("register",{url:"/register/",templateUrl:"/html/register.html",controller:"registerController"}).state("login",{url:"/login/",templateUrl:"/html/login.html",controller:"loginController"}).state("cabinet",{url:"/cabinet/",templateUrl:"/html/cabinet.html",controller:"cabinetController"}).state("cabinet.profile",{url:"profile/",templateUrl:"/html/profile.html",controller:"profileController"}).state("cabinet.news",{url:"news/",templateUrl:"/html/news.html",controller:"newsController"}).state("cabinet.problems",{url:"problems/",templateUrl:"/html/problems.html",controller:"problemsController"}).state("cabinet.addProblem",{url:"add-problem/{id}/",templateUrl:"/html/add_problem.html",controller:"addProblemController"}).state("cabinet.problem",{url:"problem/{id}/",templateUrl:"/html/problem.html",controller:"problemController"}).state("cabinet.solutions",{url:"solutions/",templateUrl:"/html/solutions.html",controller:"solutionsController"}).state("cabinet.solutionsQueue",{url:"queue/",templateUrl:"/html/solutions_queue.html",controller:"solutionsQueueController"}).state("cabinet.solution",{url:"solution/{id}/",templateUrl:"/html/solution.html",controller:"solutionController"}).state("cabinet.user",{url:"user-{id}/",templateUrl:"/html/user.html",controller:"userController"}).state("cabinet.admin",{url:"admin/",templateUrl:"/html/admin.html",controller:"adminController"}).state("cabinet.admin.child",{url:"q?{type, id}/"}).state("cabinet.groups",{url:"groups/",templateUrl:"/html/groups.html",controller:"groupsController"}).state("cabinet.group",{url:"group-{id}/",templateUrl:"/html/group.html",controller:"groupController"})}]),angular.module("notifyapp").factory("$translateRu",[function(){var _words,words=(_words={name:"Имя",logIn:"Войти",namePlaceholder:"Введите ваше имя",email:"Электронный адрес",password:"Пароль",phone:"Номер телефона",birthday:"Дата рождения",homePage:"Главная",register:"Регистрация",emailPlaceholder:"Введите ваш электронный адрес",passwordPlaceholder:"Введите ваш пароль",phonePlaceholder:"Введите ваш номер телефона",birthdayPlaceholder:"Выберите вашу дату рождения",profile:"Профиль",save:"Сохранить",logout:"Выйти",student:"Студент",teacher:"Учитель",admin:"Админ",on_moderation:"На подтверждении",editProblem:"Редактировать эту задачу",addProblem:"Добавить задачу",problemName:"Название задачи",problemNamePlaceholder:"Введите название задачи",problemDescription:"Условие задачи",problemDescriptionPlaceholder:"Введите условие задачи",timeLimit:"Лимит времени",timelimitPlaceholder:"Укажите лимит времети (мс)",memoryLimit:"Лимит памяти",memoryLimitPlaceholder:"Укажите лимит памяти (Мбайт)",tests:"Тесты",solution:"Решение",testId:"Тест №",status:"Статус",execTime:"Время выполнения",execMemory:"Затрачено памяти",myProfile:"Мой профиль",news:"Новости",tasks:"Задачи",mySolutions:"Мои решения",myGroups:"Мои группы",administration:"Администрирование",noSolutions:"У вас пока нет решений, вы сможете смотреть свои решения здесь, когда они у вас будут.",solutionId:"Решение №",problemId:"Задача №",created:"Дата отправки",lang:"Язык",cpp:"C++"},_defineProperty(_words,"problemName","Название задачи"),_defineProperty(_words,"userId","ID Пользователя"),_defineProperty(_words,"scope","Роль"),_defineProperty(_words,"modifiedScope","Роль на подтверждении"),_defineProperty(_words,"proceedOnTest","Выполняется на тесте"),_defineProperty(_words,"queue","Очередь"),_defineProperty(_words,"user","Пользователь"),_defineProperty(_words,"back","Назад"),_defineProperty(_words,"addTestsHint","Выберите из файловой системы несколько файлов (рекомендуется не менее 10, чтобы учесть в задаче все краевые случаи), они и будут входными данными для задачи, первые 2 теста увидят все пользователи."),_words);return words}]),angular.module("notifyapp").factory("$translateEn",[function(){var _words,words=(_words={name:"Name",logIn:"Login",namePlaceholder:"Enter your name",email:"Email",password:"Password",phone:"Phone number",birthday:"Birthday",homePage:"Home",register:"Register",emailPlaceholder:"Enter your email",passwordPlaceholder:"Enter your password",phonePlaceholder:"Enter your phone number",birthdayPlaceholder:"Enter your birthday",profile:"Profile",save:"Save",logout:"Logout",student:"Student",teacher:"Teacher",admin:"Admin",on_moderation:"On moderation",editProblem:"Edit this problem",addProblem:"Add problem",problemName:"Problem name",problemNamePlaceholder:"Enter problem name",problemDescription:"Problem description",problemDescriptionPlaceholder:"Enter problem description",timeLimit:"Time limit",timelimitPlaceholder:"Enter time limit (ms)",memoryLimit:"Memory limit",memoryLimitPlaceholder:"Enter memory limit (Mb)",tests:"Tests",solution:"Solution",testId:"Test #",status:"Status",execTime:"Execution time",execMemory:"Execution memory",myProfile:"My profile",news:"News",tasks:"Problems",mySolutions:"My Solves",myGroups:"My groups",administration:"Administration",noSolutions:"You haven't any solution, submit some problem and you will see solutions here.",solutionId:"Solution #",problemId:"Problem #",created:"Created",lang:"Language",cpp:"C++"},_defineProperty(_words,"problemName","Problem name"),_defineProperty(_words,"userId","user ID"),_defineProperty(_words,"scope","Scope"),_defineProperty(_words,"modifiedScope","Modified scope"),_defineProperty(_words,"proceedOnTest","Run on test"),_defineProperty(_words,"queue","Queue"),_defineProperty(_words,"user","User"),_defineProperty(_words,"back","Back"),_defineProperty(_words,"addTestsHint","Choose multiple input files from file system (recommended at least 10), first two tests will be samples for this problem."),_words);return words}]),angular.module("notifyapp").factory("$server",function($state,$rootScope){var api={},methods=["register","login","checkSession","submitProfile","getProfile","logout","addProblem","getProblem","getProblems","submitSolution","getSolutions","getMySolutions","getSolution","getProblemFull","acceptUserScope","rejectUserScope","getNews","getNewsById","addNews","editNews","getSolutionsByProblemId","getUsers","getSolutionsQueue","editProblem","deleteNews","makeGroup","editGroup","addGroupUser","removeGroupUser","getGroups","getGroupById","getUserById"],addMethod=function(methodName){api[methodName]=function(data,callback){var domain="localhost";$rootScope.api=domain="webjudgeapi.westcentralus.cloudapp.azure.com",data.cookies={sessionId:localStorage.token};var request=$.ajax({url:"http://"+domain+"/call/"+methodName,method:"POST",contentType:"application/json;charset=utf-8",headers:{sessionidcors:localStorage.token},data:JSON.stringify(data),dataType:"json"});request.done(function(data){data.err&&"Invalid session"==data.err.message&&(delete localStorage.token,$state.go("main")),callback(data.err,data.data)}),request.fail(function(xhr){callback(xhr.responseJSON)})}};for(var method in methods)addMethod(methods[method]);return api}),angular.module("notifyapp").factory("$translate",["$rootScope","$translateRu","$translateEn",function($rootScope,$translateRu,$translateEn){var vocabulary={ru:$translateRu,en:$translateEn};return console.log(vocabulary),function(word){return vocabulary[$rootScope.lang][word]||word}}]),angular.module("notifyapp").factory("$formatter",function($state){return{dateFormat:function(date,type){var v=+date||date,format="DD.MM.YY, HH:mm";return"date"==type&&(format="DD.MM.YYYY"),moment(v).format(format)}}}),angular.module("notifyapp").factory("$validators",function(){var validators={positiveNumber:function(value){return _.isNumber(value)&&value>0},statement:function statement(value){return eval(value)},notEmptyArray:function(value){return _.isArray(value)&&value.length},phoneNumber:function(value){return value.match(/380[0-9]{9}/)},percent:function(value){return _.isNumber(value)&&value>0&&value<101},email:function(value){return _.isString(value)&&value.length>0&&value.indexOf(" ")==-1&&value.match(/.+@.+/)}};return validators}).directive("checkForm",function($timeout){return function(scope,element,attrs){scope.$watch(attrs.checkForm,function(formSubmitted){if(formSubmitted){var models=$(element).find("[ng-model]");for(var el in models)$(el).keydown(function(){$(void 0).removeClass("error")});var badFields=$(element).find(".invalid-model");console.log(badFields,badFields.length),_.each(badFields,function(el){$(el).addClass("error")}),badFields.length?(console.log("bad validation",badFields),attrs.onValidationError&&_.isFunction(eval("scope."+attrs.onValidationError))&&eval(eval("scope."+attrs.onValidationError+"()"))):(console.log("good validation"),eval(eval("scope."+attrs.onValidationOk+"()")))}})}}).directive("validator",function($timeout,$validators){return function(scope,element,attrs){var validators=$validators,model="scope."+$(element).attr("ng-model");attrs.index&&(model=model.split("$index").join(attrs.index));var value=eval(model),validator=attrs.isRequired,target=attrs.errorTarget;target=target?"#"+target:element,scope.$watch(attrs.ngModel,function(value){$(target).removeClass("error");var value=eval(model),validator=attrs.validator;_.isUndefined(attrs.isRequired)?_.isNull(value)||_.isUndefined(value)?$(target).removeClass("invalid-model"):validator&&!eval("validators."+validator)(value)?$(target).addClass("invalid-model"):$(target).removeClass("invalid-model"):_.isNull(value)||_.isUndefined(value)||""==value?$(target).addClass("invalid-model"):validator&&!eval("validators."+validator)(value)?$(target).addClass("invalid-model"):$(target).removeClass("invalid-model")})}}),angular.module("notifyapp").directive("pagination",function($timeout,$server,$rootScope,$parse,$compile){return function(scope,element,attrs){attrs.length;scope.$watch(attrs.length,function(val){});var skipModel=attrs.skip;scope.$watch(skipModel,function(){var limitModel=attrs.limit,skip=(attrs.length,$parse(attrs.skip)(scope)),limit=$parse(attrs.limit)(scope),length=$parse(attrs.length)(scope),func=($parse(attrs.onChange)(scope),attrs.onChange),pages=Math.ceil(length/limit),list=angular.element('<div class="pagination-list"></div>');if(element.html(""),pages<6)for(var i=0;i<pages;i++){var item=angular.element('<div class="pagination-item" ng-class="{\'active\': '+skipModel+"=="+i+"*"+limitModel+' }" ng-click="'+skipModel+"="+i+"*"+limitModel+";"+func+'()">'+(i+1)+"</div>");list.append(item)}else{var curPage=skip/limit;if(curPage>0){var item=angular.element('<div class="pagination-item" ng-click="'+skipModel+"="+(curPage-1)+"*"+limitModel+";"+func+'()">‹</div>');list.append(item)}for(var i=0;i<3;i++){var item=angular.element('<div class="pagination-item" ng-class="{\'active\': '+skipModel+"=="+i+"*"+limitModel+' }" ng-click="'+skipModel+"="+i+"*"+limitModel+";"+func+'()">'+(i+1)+"</div>");list.append(item)}curPage>4&&list.append(angular.element('<div class="pagination-item dead">...</div>'));for(var i=curPage-1;i<=curPage+2;i++)if(!(i<3||i>pages-4)){var item=angular.element('<div class="pagination-item" ng-class="{\'active\': '+skipModel+"=="+i+"*"+limitModel+' }" ng-click="'+skipModel+"="+i+"*"+limitModel+";"+func+'()">'+(i+1)+"</div>");list.append(item)}curPage<pages-6&&list.append(angular.element('<div class="pagination-item dead">...</div>'));for(var i=pages-3;i<pages;i++){var item=angular.element('<div class="pagination-item" ng-class="{\'active\': '+skipModel+"=="+i+"*"+limitModel+' }" ng-click="'+skipModel+"="+i+"*"+limitModel+";"+func+'()">'+(i+1)+"</div>");list.append(item)}if(curPage<pages-1){var item=angular.element('<div class="pagination-item" ng-click="'+skipModel+"="+(curPage+1)+"*"+limitModel+";"+func+'()">›</div>');list.append(item)}}list=$compile(list)(scope),element.append(list)})}}),angular.module("notifyapp").directive("onEnterPress",function($timeout,$server,$rootScope,$parse){return function(scope,element,attrs){element.on("keydown",function(e){13==e.which&&scope.$apply(function(){eval($parse(attrs.onEnterPress)(scope))})})}}),angular.module("notifyapp").directive("ngFileModel",["$parse","$http","$window",function($parse,$http,$window){return{restrict:"A",link:function(scope,element,attrs){var model=$parse(attrs.ngFileModel),isMultiple=attrs.multiple,modelSetter=model.assign;element.bind("change",function(){var values=[];angular.forEach(element[0].files,function(item){if(void 0!==attrs.isPhoto){var reader=new FileReader;reader.onload=function(event){values.push(event.target.result),scope.$apply(function(){isMultiple?modelSetter(scope,values):modelSetter(scope,values[0])})},reader.readAsDataURL(item)}else{var value={url:URL.createObjectURL(item)};$http({method:"GET",url:value.url}).then(function(response){value.base64=$window.btoa(response.data)},function(response){}),values.push(value)}}),scope.$apply(function(){isMultiple?modelSetter(scope,values):modelSetter(scope,values[0])})})}}}]).directive("triggerClick",function($parse,$http,$window,$timeout){return function(scope,element,attrs){element.on("click",function(){$("#"+attrs.triggerClick).click()})}}).directive("dragndropPhoto",function($parse,$http,$window,$timeout){return{restrict:"A",link:function(scope,element,attrs){$("html").on("dragover",function(event){event.preventDefault(),event.stopPropagation(),$(this).addClass("dragging")}),$("html").on("dragleave",function(event){event.preventDefault(),event.stopPropagation(),$(this).removeClass("dragging")});var model=$parse(attrs.dragndropPhoto),modelSetter=(attrs.multiple,model.assign);$(element).on("drop",function(event){event.preventDefault(),event.stopPropagation();var reader=new FileReader;reader.onload=function(event){scope.$apply(function(){modelSetter(scope,event.target.result)})},reader.readAsDataURL(event.originalEvent.dataTransfer.files[0])})}}}),angular.module("notifyapp").controller("userController",function($scope,$rootScope,$state,$timeout,$server){$scope.userInfo={},$scope.getUserById=function(){$rootScope.preloader=!0,$server.getUserById({userId:$state.params.id},function(err,data){$rootScope.$apply(function(){$rootScope.preloader=!1}),$scope.$apply(function(){err||($scope.userInfo=data)})})},$scope.getUserById()}),angular.module("notifyapp").controller("solutionsQueueController",function($scope,$rootScope,$state,$server,$timeout){$scope.pag={skip:0,limit:10},$scope.getSolutionsQueue=function(){$rootScope.preloader=!0,$server.getSolutionsQueue({problemId:$state.params.id,skip:$scope.pag.skip,limit:$scope.pag.limit,lang:$rootScope.lang},function(err,data){$rootScope.$apply(function(){$rootScope.preloader=!1}),$scope.$apply(function(){if(!err){$scope.solutions=data.result,$scope.pag.length=+data.count;var isWaiting=!1;_.each($scope.solutions,function(v){"waiting"==v.status&&(isWaiting=!0)}),isWaiting&&$timeout(function(){$scope.getSolutionsQueue()},200)}})})},$scope.getSolutionsQueue(),$rootScope.$watch("lang",function(val){$scope.getSolutionsQueue()})}),angular.module("notifyapp").controller("solutionsController",function($scope,$rootScope,$state,$server,$timeout){$scope.pag={skip:0,limit:10},$scope.getMySolutions=function(){$rootScope.preloader=!0,$server.getMySolutions({problemId:$state.params.id,skip:$scope.pag.skip,limit:$scope.pag.limit,lang:$rootScope.lang},function(err,data){$rootScope.$apply(function(){$rootScope.preloader=!1}),$scope.$apply(function(){if(!err){$scope.solutions=data.result,$scope.pag.length=+data.count;var isWaiting=!1;_.each($scope.solutions,function(v){"waiting"==v.status&&(isWaiting=!0)}),isWaiting&&$timeout(function(){$scope.getMySolutions()},200)}})})},$scope.getMySolutions(),$rootScope.$watch("lang",function(val){$scope.getMySolutions()})}).controller("solutionController",function($scope,$rootScope,$state,$server,$window){$scope.solution={},$scope.getSolution=function(){$rootScope.preloader=!0,$server.getSolution({solutionId:$state.params.id},function(err,data){$rootScope.$apply(function(){$rootScope.preloader=!1}),$scope.$apply(function(){err||($scope.solution=data,$scope.solution.solution&&($scope.solution.solution=$window.atob($scope.solution.solution)))})})},$scope.getSolution()}),angular.module("notifyapp").controller("profileController",function($scope,$rootScope,$state,$server,$timeout){$scope.user={},window.s=$scope,$rootScope.preloader=!0,$scope.submitProfile=function(){$scope.user.isSubmitted=!1,$timeout(function(){$scope.user.isSubmitted=!0})},$scope.dateOptions={dateFormat:"dd.mm.yy",maxDate:0,changeYear:!0,yearRange:"1950:2009"},$scope.editProfile=function(){$scope.user.profileSubmitPreloader=!0,$server.submitProfile($scope.user,function(err,data){$scope.$apply(function(){err?($scope.user.profileSubmitPreloader=!1,$scope.user.error="Ошибка сервера, перезагрузите страницу"):($scope.user.profileSubmitPreloader=!1,$scope.getProfile())})})},$scope.getProfile=function(){$server.getProfile({},function(err,data){$rootScope.$apply(function(){$rootScope.preloader=!1}),$scope.$apply(function(){err?console.log("error",err):($scope.user=data||$scope.user,$scope.user.modifiedScopeStart=$scope.user.modifiedScope)})})},$scope.getProfile()}),angular.module("notifyapp").controller("problemController",function($scope,$rootScope,$state,$server,$window,$interval,$timeout){$scope.solve={problemId:$state.params.id,lang:"cpp"},$scope.problem={},$scope.pag={skip:0,limit:10},$scope.submit=function(){$scope.solve.isSubmitting=!0,$scope.obj=JSON.parse(JSON.stringify($scope.solve)),delete $scope.obj.sourceFile,$scope.obj.source=$window.btoa($scope.obj.source),$server.submitSolution($scope.obj,function(err,data){$scope.$apply(function(){$timeout(function(){$scope.solve.isSubmitting=!1},1e3),err||($scope.submitInterval&&$interval.cancel($scope.submitInterval),$scope.submitInterval=$interval(function(){$scope.getSolutionsByProblemId()},300))})})},$scope.$watch("solve.sourceFile.base64",function(val){val&&($scope.solve.source=$window.atob(val))}),$rootScope.$watch("lang",function(val){$scope.getProblem()}),$scope.showAllSamples=function(){$scope.problem.samples=$scope.problem.allSamples},$scope.getProblem=function(){$rootScope.preloader=!0,$server.getProblem({problemId:$state.params.id,lang:$rootScope.lang},function(err,data){$rootScope.$apply(function(){$rootScope.preloader=!1}),$scope.$apply(function(){err||($scope.problem=data,$scope.problem.allSamples=data.samples,$scope.problem.samples=[],_.each($scope.problem.allSamples,function(el,i){el.input=$window.atob(el.input),el.output=$window.atob(el.output),i<2&&$scope.problem.samples.push(el)}))})})},$scope.getProblem(),$scope.$on("$destroy",function(){$interval.cancel($scope.submitInterval)}),$scope.getSolutionsByProblemId=function(){$server.getSolutionsByProblemId({problemId:$state.params.id,skip:$scope.pag.skip,limit:$scope.pag.limit},function(err,data){$scope.$apply(function(){if(!err){$scope.solutions=data.result;var isWaiting=!1;$scope.pag.length=+data.count,_.each($scope.solutions,function(v){"waiting"==v.status&&(isWaiting=!0)}),isWaiting||$interval.cancel($scope.submitInterval)}})})},$window.s=$scope,$scope.getSolutionsByProblemId()}),angular.module("notifyapp").controller("problemsController",function($scope,$rootScope,$state,$server){$scope.problems=[],$scope.pag={skip:0,limit:10},$scope.getProblems=function(){$rootScope.preloader=!0,$server.getProblems({skip:$scope.pag.skip,limit:$scope.pag.limit,lang:$rootScope.lang},function(err,data){$rootScope.$apply(function(){$rootScope.preloader=!1}),$scope.$apply(function(){err||($scope.problems=data.result,$scope.pag.length=+data.count)})})},$scope.getProblems()}),angular.module("notifyapp").controller("newsController",function($scope,$rootScope,$state,$server){$scope.getNews=function(){$rootScope.preloader=!0,$server.getNews({lang:$rootScope.lang},function(err,data){$rootScope.$apply(function(){$rootScope.preloader=!1}),$scope.$apply(function(){err||($scope.news=data.result)})})},$rootScope.$watch("lang",function(){$scope.getNews()}),$scope.getNews()}),angular.module("notifyapp").controller("mainController",function($scope,$rootScope,$state,$translate,$server,$formatter,$timeout){localStorage.lang||(localStorage.lang="ru"),$rootScope.dateFormat=$scope.dateFormat=$formatter.dateFormat,$rootScope.lang=localStorage.lang,$scope.state=$state,$rootScope.translate=$scope.translate=$translate,$scope.setLang=function(lang){$rootScope.lang=lang,localStorage.lang=lang},$scope.floor=$rootScope.floor=function(v){return Math.floor(100*v)/100},$timeout(function(){$scope.checkSession2=function(){return localStorage.token?void $server.checkSession({},function(err,data){$scope.$apply(function(){err?(delete localStorage.token,$rootScope.isGuest=!0):($scope.user=data,$rootScope.isGuest=!1,$state.includes("cabinet")||$state.go("cabinet"))})}):void($rootScope.isGuest=!0)},$state.current.name.indexOf("cabinet")==-1&&$scope.checkSession2()},50),$scope.logout=function(){$rootScope.isGuest=!0,$server.logout({},function(err,data){$scope.$apply(function(){err?delete localStorage.token:delete localStorage.token})}),$state.go("main")},$scope.prevent=$rootScope.prevent=function(e){e.stopPropagation()},$scope.nTimes=function(n){for(var a=[],i=0;i<n;i++)a.push(i);return a}}).controller("homeController",function($scope,$rootScope,$state){}),angular.module("notifyapp").controller("registerController",function($scope,$rootScope,$state,$timeout,$server){delete localStorage.token,$scope.user={},$scope.submitRegister=function(){$scope.user.isSubmitted=!1,$timeout(function(){$scope.user.isSubmitted=!0})},$scope.dateOptions={dateFormat:"dd.mm.yy",maxDate:0,changeYear:!0,yearRange:"1950:2009"},$scope.register=function(){$server.register($scope.user,function(err,data){err||$server.login($scope.user,function(err,data){$scope.$apply(function(){err||(localStorage.token=data.token,$state.go("cabinet"))})})})}}).controller("loginController",function($scope,$rootScope,$state,$server){delete localStorage.token,$scope.user={},$scope.login=function(){$scope.user.error="",$server.login($scope.user,function(err,data){$scope.$apply(function(){err?$scope.user.error="Неверный логин или пароль":(localStorage.token=data.token,$state.go("cabinet"))})})}}),angular.module("notifyapp").controller("groupsController",function($scope,$rootScope,$state,$server,$timeout){$scope.obj={},$scope.makeGroup=function(){$scope.obj.preloader=!0,$server.makeGroup($scope.obj,function(err,data){$scope.$apply(function(){$scope.obj.preloader=!1,err||(obj.showAddGroup=!1,$scope.getGroups("my"))})})},$scope.makeGroupSubmit=function(){$scope.obj.isSubmitted=!1,$timeout(function(){$scope.obj.isSubmitted=!0},1)},$scope.editGroup=function(){$server.editGroup($scope.obj,function(err,data){$scope.$apply(function(){})})},$scope.groups=[],$scope.getGroups=function(type){$rootScope.preloader=!0,$server.getGroups({type:type||"all"},function(err,data){$rootScope.$apply(function(){$rootScope.preloader=!1}),$scope.$apply(function(){err||($scope.groups=data.result)})})},$scope.getGroups("my")}).controller("groupController",function($scope,$rootScope,$state,$server,$timeout){$scope.group={},$scope.addGroupUser=function(){$scope.group.addUserError="",$server.addGroupUser($scope.group,function(err,data){$scope.$apply(function(){err?$scope.group.addUserError="Такого пользователя не существует":$scope.getGroupById()})})},$scope.removeGroupUser=function(id){$scope.group.preloader||($scope.group.preloader={}),$scope.group.preloader[id]=!0,$server.removeGroupUser({userId:id,groupId:$state.params.id},function(err,data){$scope.$apply(function(){delete $scope.group.preloader[id],err||$scope.getGroupById()})})},$scope.getGroupById=function(){$rootScope.preloader=!0,$server.getGroupById({groupId:$state.params.id},function(err,data){$rootScope.$apply(function(){$rootScope.preloader=!1}),$scope.$apply(function(){err||($scope.group=data)})})},$scope.editGroupSubmit=function(){$scope.group.isSubmitted=!1,$timeout(function(){$scope.group.isSubmitted=!0},1)},$scope.editGroup=function(){$rootScope.preloader=!0,$server.editGroup($scope.group,function(err,data){$rootScope.$apply(function(){$rootScope.preloader=!1}),$scope.$apply(function(){err||$scope.getGroupById()})})},$scope.getGroupById()}),angular.module("notifyapp").controller("cabinetController",function($scope,$rootScope,$state,$server){$scope.user={},$scope.checkSession=function(){return localStorage.token?void $server.checkSession({},function(err,data){$scope.$apply(function(){err?(delete localStorage.token,$rootScope.isGuest=!0):($scope.user=data,$rootScope.isGuest=!1)})}):void($rootScope.isGuest=!0)},$scope.checkSession()}),angular.module("notifyapp").controller("adminController",function($scope,$rootScope,$state,$server){$scope.addNewsContent={title:[{lang:"ru"},{lang:"en"}],body:[{lang:"ru"},{lang:"en"}]},$scope.acceptUserScope=function(id){$server.acceptUserScope({userId:id},function(err,data){$scope.$apply(function(){err||$scope.getUsers()})})},$scope.rejectUserScope=function(id){$server.rejectUserScope({userId:id},function(err,data){$scope.$apply(function(){err||$scope.getUsers()})})},$scope.getNews=function(){$server.getNews({lang:$rootScope.lang},function(err,data){$scope.$apply(function(){err||($scope.news=data.result)})})},$scope.getNewsById=function(){$server.getNewsById({id:$state.params.id},function(err,data){$scope.$apply(function(){})})},$scope.addNews=function(){$server.addNews($scope.addNewsContent,function(err,data){$scope.$apply(function(){err||($scope.addNewsContent={title:[{lang:"ru"},{lang:"en"}],body:[{lang:"ru"},{lang:"en"}]},alert("Новость успешно добавлена"),$state.go("cabinet.admin.child",{type:"news"}))})})},$scope.deleteNews=function(){$scope.addNewsContent.newsId=$state.params.id,$server.deleteNews($scope.addNewsContent,function(err,data){$scope.$apply(function(){err||$scope.getNews()})})},$scope.editNews=function(){$scope.addNewsContent.newsId=$state.params.id,$server.editNews($scope.addNewsContent,function(err,data){$scope.$apply(function(){err||$state.go("cabinet.admin.child",{type:"news"})})})},$scope.getUsers=function(){$server.getUsers({},function(err,data){$scope.$apply(function(){err||($scope.users=data)})})};var events={addNews:function(){$scope.addNewsContent={title:[{lang:"ru"},{lang:"en"}],body:[{lang:"ru"},{lang:"en"}]},$state.params.id&&_.each(["ru","en"],function(lang,i){$server.getNewsById({newsId:$state.params.id,lang:lang},function(err,data){$scope.$apply(function(){err||($scope.addNewsContent.title[i].value=data.title,$scope.addNewsContent.body[i].value=data.body)})})})},news:function(){$scope.getNews()},users:function(){$scope.getUsers()}};$scope.state={},$scope.$on("$stateChangeSuccess",function(){$scope.state=$state.params,$scope.state.type&&events[$scope.state.type]()})}),angular.module("notifyapp").controller("addProblemController",function($scope,$rootScope,$state,$server,$window,$timeout){$window.s=$scope;var interval=setInterval(function(){if($scope.problem){var obj=JSON.parse(JSON.stringify($scope.problem));delete obj.samples,localStorage.addProblem=JSON.stringify(obj)}},1e3);$scope.$on("$destroy",function(){clearInterval(interval)}),$scope.initProblem=function(){$scope.problem={name:[{lang:"ru"},{lang:"en"}],description:[{lang:"ru"},{lang:"en"}],outputSourceFile:{},samples:[]}},$server.checkSession({},function(err,data){$scope.$apply(function(){err?(delete localStorage.token,$state.go("cabinet.problems")):($scope.user=data,"admin"!=$scope.user.scope&&"teacher"!=$scope.user.scope&&$state.go("cabinet.problems"))})}),$state.params.id?($rootScope.preloader=!0,$server.getProblemFull({problemId:$state.params.id},function(err,data){$rootScope.$apply(function(){$rootScope.preloader=!1}),$scope.$apply(function(){err?$scope.initProblem():(data.memoryLimit=+data.memoryLimit/1024/1024,data.timeLimit=1*+data.timeLimit,$scope.problem=data,data.outputSource=$window.atob(data.outputSource),console.log($scope.problem.name[0]))})})):localStorage.addProblem?("undefined"!=localStorage.addProblem&&($scope.problem=JSON.parse(localStorage.addProblem)),$scope.problem.problemId&&!$state.params.id&&$scope.initProblem(),$scope.problem.error=void 0,$scope.problem.isSubmitted=!1):$scope.initProblem(),$scope.$watch("problem.outputSourceFile[0].base64",function(val){val&&($scope.problem.outputSource=$window.atob(val))}),$scope.submitAddProblem=function(){$scope.problem.isSubmitted=!1,$timeout(function(){$scope.problem.isSubmitted=!0})},$scope.addProblem=function(){return!$scope.problem.samples||$scope.problem.samples.length<3?void($scope.problem.error="Добавьте тесты к задаче, их должно быть как минимум 3"):($scope.problem.preloader=!0,$scope.obj=JSON.parse(JSON.stringify($scope.problem)),$scope.obj.outputSource=$window.btoa($scope.obj.outputSource),$scope.obj.memoryLimit=1024*$scope.obj.memoryLimit*1024,delete $scope.problem.isSubmitted,_.each($scope.obj.samples,function(el,i){el.input=el.base64||el.input,delete el.url,delete el.base64}),delete $scope.obj.outputSourceFile,delete $scope.obj.isSubmitted,$scope.obj.publicCount=2,void($state.params.id?($scope.obj.problemId=$state.params.id,$server.editProblem($scope.obj,function(err,data){$scope.$apply(function(){$scope.problem.preloader=!1,err?($scope.problem.preloader=!1,$scope.problem.error="Ошибка сервера, перезагрузите страницу"):($scope.problem.preloader=!1,$state.go("cabinet.problem",{id:$state.params.id}))})})):$server.addProblem($scope.obj,function(err,data){$scope.$apply(function(){$scope.problem.preloader=!1,err?($scope.problem.preloader=!1,$scope.problem.error="Ошибка сервера, перезагрузите страницу"):($scope.problem.preloader=!1,$state.go("cabinet.problem",{id:data.problemId}))})})))}}),angular.module("notifyapp").run(["$templateCache",function($templateCache){$templateCache.put("/index.html",'<!DOCTYPE html>\r\n<html lang="en" ng-app="notifyapp" ng-controller="mainController">\r\n<head>\r\n    <meta charset="UTF-8">\r\n    <title>notify APP</title>\r\n    <base href="/">\r\n    <link rel="stylesheet" href="assets/init.css">\r\n    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/github.min.css">\r\n    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">\r\n    <!-- bower:css -->\r\n    <!-- endbower -->\r\n\r\n    <link rel="stylesheet" href="css/index.css">\r\n</head>\r\n<body>\r\n\r\n    <header class="main-header" ng-include="\'/html/header.html\'"></header>\r\n    <div class="ui-view main-container"></div>\r\n    <footer class="main-footer" ng-include="\'/html/footer.html\'"></footer>\r\n\r\n    \r\n    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>\r\n    <!-- bower:js -->\r\n    <!-- endbower -->\r\n    \r\n    <script src="scripts/vendor.js"></script>\r\n\r\n    \r\n    <script src="index.js"></script>\r\n    <!-- inject:js -->\r\n    <!-- endinject -->\r\n</body>\r\n</html>'),
$templateCache.put("/html/404.html","<div>\r\n\t404\r\n</div>"),$templateCache.put("/html/add_problem.html",'<div class="add-problem" ng-show="!$root.preloader">\r\n  <h2 style="margin-bottom: 20px;">{{translate("addProblem")}}</h2>\r\n  <div class="form"  check-form="problem.isSubmitted" on-validation-ok=\'addProblem\' >\r\n    <h2 >Русский вариант</h2>\r\n    <table>\r\n      <tr>\r\n        <td>{{translate("problemName")}}:</td>\r\n        <td>\r\n          <input type="text" ng-model="problem.name[0].value" placeholder="{{translate(\'problemNamePlaceholder\')}}" validator is-required>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{translate("problemDescription")}}:</td>\r\n        <td>\r\n          <textarea ng-model="problem.description[0].value" placeholder="{{translate(\'problemDescriptionPlaceholder\')}}" validator is-required></textarea>\r\n        </td>\r\n      </tr>\r\n    </table>\r\n\r\n    <h2>Английский вариант</h2>\r\n    <table>\r\n      <tr>\r\n        <td>{{translate("problemName")}}:</td>\r\n        <td>\r\n          <input type="text" ng-model="problem.name[1].value" placeholder="{{translate(\'problemNamePlaceholder\')}}" validator is-required>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{translate("problemDescription")}}:</td>\r\n        <td>\r\n          <textarea ng-model="problem.description[1].value" placeholder="{{translate(\'problemDescriptionPlaceholder\')}}" validator is-required></textarea>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{translate("timeLimit")}}:</td>\r\n        <td>\r\n          <input type="number" ng-model="problem.timeLimit" placeholder="{{translate(\'timelimitPlaceholder\')}}" validator="positiveNumber" is-required>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{translate("memoryLimit")}}:</td>\r\n        <td>\r\n          <input type="number" ng-model="problem.memoryLimit" placeholder="{{translate(\'memoryLimitPlaceholder\')}}" validator="positiveNumber" is-required>\r\n        </td>\r\n      </tr>\r\n\r\n      <tr>\r\n        <td>{{translate("tests")}}:</td>\r\n        <td>\r\n          <p class="hint">{{translate("addTestsHint")}}</p>\r\n          <p><input type="file" multiple ng-file-model="problem.samples"></p>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{translate("solution")}}:</td>\r\n        <td>\r\n          <input type="file" multiple ng-file-model="problem.outputSourceFile">\r\n          <textarea  ng-model="problem.outputSource" validator is-required placeholder="Вставьте сюда исходный код решения"></textarea>\r\n        </td>\r\n      </tr>\r\n    </table>\r\n\r\n\r\n    <button ng-click="submitAddProblem()" class="default" ng-disabled="problem.preloader">\r\n      <span ng-if="!problem.preloader">{{translate("save")}}</span>\r\n      <span ng-if="problem.preloader" class="button-preloader"></span>\r\n    </button>\r\n    <p class="error" ng-if="problem.error" style="margin-top: 10px;">{{problem.error}}</p>\r\n  </div>\r\n</div>'),$templateCache.put("/html/admin.html",'<div class="admin">\r\n  <ul class="links">\r\n    <li ng-class="{\'active\': state.type==\'news\'}"><a ui-sref="cabinet.admin.child({type:\'news\'})">Посмотреть новости</a></li>\r\n    <li ng-class="{\'active\': state.type==\'addNews\'}"><a ui-sref="cabinet.admin.child({type:\'addNews\'})">Добавить новость</a></li>\r\n    <li ng-class="{\'active\': state.type==\'users\'}"><a ui-sref="cabinet.admin.child({type:\'users\'})">Пользователи</a></li>\r\n  </ul>\r\n\r\n  <div class="admin-content">\r\n    <div class="news" ng-if="state.type==\'news\'">\r\n      <div class="news-wrapper" >\r\n        <div class="item" ng-repeat="item in news" ng-if="item.body">\r\n          <button ui-sref="cabinet.admin.child({type:\'addNews\', id: item.newsId})" style="float: right;">{{\'edit\'}}</button>\r\n          <h2 ng-bind-html="item.title"></h2>\r\n          <h4 ng-bind-html="item.body"></h4>\r\n          <p class="author">{{item.creator}}, {{dateFormat(item.created, \'date\')}}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="add-news" ng-if="state.type==\'addNews\'">\r\n      <div class="block">\r\n        <p>Русский вариант</p>\r\n        <input type="text" placeholder="title" ng-model="addNewsContent.title[0].value">\r\n\r\n        <textarea placeholder="content" ng-model="addNewsContent.body[0].value"></textarea>\r\n       \r\n      </div>\r\n      <div class="block">\r\n        <p>Английский вариант</p>\r\n        <input type="text" placeholder="title" ng-model="addNewsContent.title[1].value">\r\n\r\n        <textarea placeholder="content" ng-model="addNewsContent.body[1].value"></textarea>\r\n      </div>\r\n      <button class="default" ng-click="state.id?editNews():addNews()">{{translate(\'save\')}}</button>\r\n      <!-- <button class="default" ng-click="deleteNews()" ng-if="state.id">{{translate(\'delete\')}}</button> -->\r\n    </div>\r\n\r\n    <div class="users" ng-if="state.type==\'users\'">\r\n      <table class="default">\r\n        <thead>\r\n          <th>{{translate(\'userId\')}}</th>\r\n          <th>{{translate(\'name\')}}</th>\r\n          <th>{{translate(\'scope\')}}</th>\r\n          <th>{{translate(\'modifiedScope\')}}</th>\r\n        </thead>\r\n        <tbody>\r\n          <tr ng-repeat="user in users">\r\n            <td>{{user.userId}}</td>\r\n            <td ui-sref="cabinet.user({id: user.userId})" ng-click="prevent($event)">{{user.name}} ({{user.email}})</td>\r\n            <td>{{translate(user.scope)}}</td>\r\n            <td>\r\n              <p ng-if="user.modifiedScope">\r\n                <span style="display: inline-block;margin-right: 10px;">{{translate(user.modifiedScope)}}</span>\r\n                <button class="default" ng-click="acceptUserScope(user.userId)">Подтвердить</button>\r\n                <button class="default" ng-click="rejectUserScope(user.userId)">Отклонить</button>\r\n              </p>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n    </div>\r\n  </div>\r\n</div>'),$templateCache.put("/html/cabinet.html",'<div class="wrapper cabinet">\r\n  <div class="left-menu">\r\n    <ul>\r\n      <li ui-sref=".profile" ng-if="!$root.isGuest"><a>{{translate(\'myProfile\')}}</a></li>\r\n      <li ui-sref=".solutionsQueue"><a>{{translate(\'queue\')}}</a></li>\r\n      <li ui-sref=".news"><a>{{translate(\'news\')}}</a></li>\r\n      <li ui-sref=".problems"><a>{{translate(\'tasks\')}}</a></li>\r\n      <li ui-sref=".solutions" ng-if="!$root.isGuest"><a>{{translate(\'mySolutions\')}}</a></li>\r\n      <li ui-sref=".groups" ng-if="!$root.isGuest"><a>{{translate(\'myGroups\')}}</a></li>\r\n      <li ui-sref=".admin" ng-if="user.scope==\'admin\'"><a>{{translate(\'administration\')}}</a></li>\r\n    </ul>\r\n  </div><!--\r\n  --><div class="cabinet-inner" >\r\n        <div ui-view></div>\r\n        <div class="preloader" ng-if="$root.preloader"></div>\r\n      </div>\r\n</div>'),$templateCache.put("/html/footer.html",'<div class="wrapper">\r\n  <img src="assets/img/logo.png" width="130" height="56" alt="webjudge">\r\n  \r\n</div>'),$templateCache.put("/html/group.html",'<div class="group" ng-if="!$root.preloader">\r\n  <h2>{{group.name}}</h2>\r\n\r\n  <h4>{{group.description}}</h4>\r\n\r\n  <button class="default" id="edit" ng-click="group.showAddGroup = !group.showAddGroup" ng-if="group.isAdmin">{{group.showAddGroup?"Отменить редактирование группы":"Редактировать группу"}}</button>\r\n  <div class="form"  check-form="group.isSubmitted" on-validation-ok=\'editGroup\' ng-if="group.showAddGroup">\r\n    <table>\r\n        <tr>\r\n          <td>{{translate("groupName")}}:</td>\r\n          <td>\r\n            <input type="text" ng-model="group.name" placeholder="{{translate(\'groupNamePlaceholder\')}}" validator is-required>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td>{{translate("groupDescription")}}:</td>\r\n          <td>\r\n            <textarea ng-model="group.description" placeholder="{{translate(\'groupDescriptionPlaceholder\')}}" validator is-required></textarea>\r\n          </td>\r\n        </tr>\r\n      </table>\r\n      <button class="default" ng-click="editGroupSubmit()" ng-disabled="!group.description || !group.name">\r\n        \r\n        <span ng-if="!group.preloader">Сохранить</span>\r\n        <span ng-if="group.preloader" class="button-preloader"></span>\r\n      </button>\r\n    </div>\r\n  <div class="groups-wrapper">\r\n      <div class="action" ng-if="group.isAdmin">\r\n        <input type="text" class="default" ng-model="group.userEmail" placeholder="Email участника">\r\n        <button class="default" ng-click="addGroupUser()" ng-disabled="!group.userEmail.match(\'.+@.+\')">Пригласить</button>\r\n        <p class="error">{{group.addUserError}}</p>\r\n      </div>\r\n      <table class="default">\r\n        <thead>\r\n          <th>ID</th>\r\n          <th>Имя</th>\r\n          <th>Дата вступления</th>\r\n          <th></th>\r\n        </thead>\r\n        <tbody>\r\n          <tr ng-repeat="user in group.users" ui-sref="cabinet.user({id: user.userId})">\r\n            <td>{{user.userId}}</td>\r\n            <td>{{user.name}}</td>\r\n            <td>{{dateFormat(user.created)}}</td>\r\n            <td ng-click="prevent($event);" style="width: 40px;text-align: center;;">\r\n              <i class="fa fa-times" ng-click="removeGroupUser(user.userId)" style="color: #f00;font-size: 20px;" ng-if="!group.preloader[user.userId]"></i>\r\n              <span ng-if="group.preloader[user.userId]" class="button-preloader"></span>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n</div>'),$templateCache.put("/html/groups.html",'<div class="groups" ng-if="!$root.preloader">\r\n  <button class="default" ng-click="obj.showAddGroup = !obj.showAddGroup">{{obj.showAddGroup?"Отменить создание группы":"Создать группу"}}</button>\r\n  <div class="form"  check-form="obj.isSubmitted" on-validation-ok=\'makeGroup\' ng-if="obj.showAddGroup">\r\n    <table>\r\n        <tr>\r\n          <td>{{translate("groupName")}}:</td>\r\n          <td>\r\n            <input type="text" ng-model="obj.name" placeholder="{{translate(\'groupNamePlaceholder\')}}" validator is-required>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td>{{translate("groupDescription")}}:</td>\r\n          <td>\r\n            <textarea ng-model="obj.description" placeholder="{{translate(\'groupDescriptionPlaceholder\')}}" validator is-required></textarea>\r\n          </td>\r\n        </tr>\r\n      </table>\r\n      <button class="default" ng-click="makeGroupSubmit()" ng-disabled="!obj.description || !obj.name">\r\n        \r\n        <span ng-if="!obj.preloader">Создать группу</span>\r\n        <span ng-if="obj.preloader" class="button-preloader"></span>\r\n      </button>\r\n    </div>\r\n    <div class="groups-wrapper">\r\n      <table class="default">\r\n        <thead>\r\n          <th>ID</th>\r\n          <th>Название</th>\r\n          <th>Описание</th>\r\n          <th>Участников</th>\r\n        </thead>\r\n        <tbody>\r\n          <tr ng-repeat="group in groups" ui-sref="cabinet.group({id: group.groupId})">\r\n            <td>{{group.groupId}}</td>\r\n            <td>{{group.name}}</td>\r\n            <td>{{group.description}}</td>\r\n            <td>{{group.usersCount}}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n</div>'),$templateCache.put("/html/header.html",'<div class="wrapper">\r\n  <img src="assets/img/logo.png" width="130" height="60" alt="webjudge">\r\n  <img src="assets/img/menu.svg" alt="" id="menu-img" ng-click="showMenu =! showMenu">\r\n  <ul class="links">\r\n    <li ng-if="$root.isGuest"><a ui-sref="login">{{translate("logIn")}}</a></li>\r\n    <li ng-if="$root.isGuest"><a ui-sref="register">{{translate("register")}}</a></li>\r\n    <li><a ng-click="setLang(\'ru\')">Ru</a></li>\r\n    <li><a ng-click="setLang(\'en\')">En</a></li>\r\n    <li ng-if="!$root.isGuest"><a ng-click="logout()">{{translate("logout")}}</a></li>\r\n  </ul>\r\n  <ul class="links-mobile" ng-show="showMenu" ng-click="showMenu = false">\r\n    <li ui-sref="login" ng-if="$root.isGuest"><a>{{translate("logIn")}}</a></li>\r\n    <li ui-sref="register" ng-if="$root.isGuest"><a>{{translate("register")}}</a></li>\r\n    <li ng-click="setLang(\'ru\')"><a>Ru</a></li>\r\n    <li ng-click="setLang(\'en\')"><a>En</a></li>\r\n    <li ng-click="logout()" ng-if="!$root.isGuest"><a>{{translate("logout")}}</a></li>\r\n  </ul>\r\n</div>'),$templateCache.put("/html/index.html",'\r\n<div class="wrapper">\r\n  <div class="news" ng-show="!$root.preloader" ng-controller="newsController">\r\n    <h1>{{translate("news")}}</h1>\r\n    <div class="news-wrapper" >\r\n      <div class="item" ng-repeat="item in news" ng-if="item.body">\r\n        <h2 ng-bind-html="item.title"></h2>\r\n        <h4 ng-bind-html="item.body"></h4>\r\n        <p class="author">{{item.creator}}, {{dateFormat(item.created, \'date\')}}</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'),$templateCache.put("/html/login.html",'<div class="wrapper">\r\n  <ul class="breadcrumb">\r\n    <li class="breadcrumb-item"><a href="" ui-sref="main">{{translate("homePage")}}</a></li>\r\n  </ul>\r\n  <h2>Вход</h2>\r\n  <div class="form"  check-form="user.isSubmitted" on-validation-ok=\'register\' >\r\n    <table>\r\n      \r\n      <tr>\r\n        <td>{{translate("email")}}:</td>\r\n        <td>\r\n          <input type="text" ng-model="user.email" is-required validator="email" placeholder="{{translate(\'emailPlaceholder\')}}" on-enter-press="login()">\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{translate("password")}}:</td>\r\n        <td>\r\n          <input type="password" ng-model="user.password" is-required validator placeholder="{{translate(\'passwordPlaceholder\')}}" on-enter-press="login()">\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    <p class="error" ng-if="user.error">Вы указали неверный логин или пароль</p>\r\n    <button ng-click="login()" class="default">Войти</button>\r\n  </div>\r\n</div>'),$templateCache.put("/html/news.html",'<div class="news" ng-show="!$root.preloader">\r\n  <h1>{{translate("news")}}</h1>\r\n  <div class="news-wrapper" >\r\n    <div class="item" ng-repeat="item in news" ng-if="item.body">\r\n      <h2 ng-bind-html="item.title"></h2>\r\n      <h4 ng-bind-html="item.body"></h4>\r\n      <p class="author">{{item.creator}}, {{dateFormat(item.created, \'date\')}}</p>\r\n    </div>\r\n  </div>\r\n</div>'),$templateCache.put("/html/problem.html",'<div class="problem" ng-show="!$root.preloader">\r\n  \r\n  <button class="default" ui-sref="^.addProblem({id: solve.problemId})" ng-if="user.scope==\'admin\'">{{translate(\'editProblem\')}}</button>\r\n\r\n  <h1>{{problem.name}}</h1>\r\n  <div ng-bind-html="problem.description"></div>\r\n\r\n\r\n  <div class="wrapper-problem">\r\n    <div class="samples">\r\n      <table>\r\n        <tr ng-repeat="sample in problem.samples">\r\n          <td>\r\n            <p>\r\n              {{sample.input}}\r\n            </p>\r\n          </td>\r\n          <td>\r\n            <p >\r\n                {{sample.output}}\r\n              </p>\r\n          </td>\r\n        </tr>\r\n      </table>\r\n  \r\n    </div>\r\n    <a ng-click="showAllSamples()" class="blue show-tests" ng-if="user.scope==\'admin\' && problem.samples.length<problem.allSamples.length">{{translate(\'showAllTests\')}}</a>\r\n    <div class="solve" ng-if="!$root.isGuest">\r\n      <input type="file" ng-file-model="solve.sourceFile" style="margin-bottom: 10px;">\r\n      <textarea placeholder="Исходный код программы вставить сюда" ng-model="solve.source"></textarea>\r\n      \r\n      <div class="processing">\r\n        <button class="default" ng-click="submit()" ng-disabled="solve.isSubmitting">\r\n          <span ng-if="!solve.isSubmitting">{{translate("submit")}}</span>\r\n          <span ng-if="solve.isSubmitting" class="button-preloader"></span>\r\n        </button>\r\n        <p class="progress" ng-if="solve.isSubmitting">submiting....</p>\r\n      </div>\r\n    </div>\r\n    <div class="solutions" ng-if="solutions.length">\r\n      <table class="default">\r\n        <thead>\r\n          <th>{{translate(\'solutionId\')}}</th>\r\n          <th>{{translate(\'created\')}}</th>\r\n          <th>{{translate(\'lang\')}}</th>\r\n          <th>{{translate(\'status\')}}</th>\r\n        </thead>\r\n        <tbody>\r\n          <tr ng-repeat="solution in solutions" ui-sref="^.solution({id: solution.solutionId})" ng-class="{\'green\': solution.status==\'ok\', \'yellow\': solution.status==\'waiting\', \'red\': (solution.status!=\'ok\'&&solution.status!=\'waiting\')}">\r\n            <td>{{solution.solutionId}}</td>\r\n            <td>{{dateFormat(solution.created)}}</td>\r\n            <td>{{translate(solution.lang)}}</td>\r\n            <td>\r\n              <span ng-if="solution.status!=\'waiting\'">{{solution.status}}</span>\r\n              <span ng-if="solution.status==\'waiting\'">\r\n                <span ng-if="+solution.testPassed">{{translate(\'proceedOnTest\') + " " + solution.testPassed+"/"+solution.testCount}}</span>\r\n                <span ng-if="!+solution.testPassed">{{solution.status}}</span>\r\n              </span>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <div class="pagination" pagination length="pag.length" limit="pag.limit" skip="pag.skip" on-change="getSolutionsByProblemId" ng-if="solutions.length"></div>\r\n    </div>\r\n  </div>\r\n</div>'),$templateCache.put("/html/problems.html",'<div class="problems" ng-show="!$root.preloader">\r\n  <button class="default" ui-sref="^.addProblem" ng-if="user.scope==\'admin\' || user.scope==\'teacher\'">{{translate(\'addProblem\')}}</button>\r\n  <table class="problems-table">\r\n    <thead>\r\n      <th>ID</th>\r\n      <th>Название</th>\r\n      <th>Сложность</th>\r\n      <th>Автор</th>\r\n    </thead>\r\n    <tbody>\r\n      <tr ng-repeat="problem in problems" ui-sref="cabinet.problem({id: problem.problemId})" ng-class="{\'solved\': problem.isSolved}">\r\n        <td>{{problem.problemId}} <img src="assets/img/tick.png" width="13" height="13" alt="" ng-if="problem.isSolved"></td>\r\n        <td>{{problem.name}}</td>\r\n        <td><img src="assets/img/muscles.png" alt="" width="14" height="13" ng-repeat="el in nTimes(problem.difficulty)"></td>\r\n        <td>{{problem.author}}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <div class="pagination" pagination length="pag.length" limit="pag.limit" skip="pag.skip" on-change="getSolutionsByProblemId" ng-if="problems.length && false"></div>\r\n</div>'),$templateCache.put("/html/profile.html",'<div class="profile" ng-show="!$root.preloader">\r\n  <h2>{{translate("profile")}}</h2>\r\n  <div class="form"  check-form="user.isSubmitted" on-validation-ok=\'editProfile\' >\r\n    <input type="file" ng-file-model="user.base64" id="photo" ng-show="false" is-photo>\r\n    <div class="upload-photo" dragndrop-photo="user.base64" trigger-click="photo">\r\n      <div class="drop-on-me">\r\n        +\r\n      </div>\r\n      <p>Нажмите или перетащите фото</p>\r\n      <img ng-src="http://{{$root.api}}/photo/{{user.photo}}" alt="" ng-if="user.photo" width="100%" height="100%">\r\n      <img src="{{user.base64}}" alt="" ng-if="user.base64" width="100%" height="100%">\r\n\r\n    </div>\r\n    <table>\r\n      <tr>\r\n        <td>{{translate("name")}}:</td>\r\n        <td>\r\n          <input type="text" ng-model="user.name" is-required validator placeholder="{{translate(\'namePlaceholder\')}}">\r\n        </td>\r\n      </tr>\r\n<!--       <tr>\r\n        <td>{{translate("email")}}:</td>\r\n        <td>\r\n          <input type="text" ng-model="user.email" is-required validator="email" placeholder="{{translate(\'emailPlaceholder\')}}">\r\n        </td>\r\n      </tr> -->\r\n     <!--  <tr>\r\n        <td>{{translate("password")}}:</td>\r\n        <td>\r\n          <input type="password" ng-model="user.password" is-required validator placeholder="{{translate(\'passwordPlaceholder\')}}">\r\n        </td>\r\n      </tr> -->\r\n      <tr>\r\n        <td>{{translate("phone")}}:</td>\r\n        <td>\r\n          <input type="tel" ng-model="user.phone" is-required validator="phoneNumber" placeholder="{{translate(\'phonePlaceholder\')}}">\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{translate("birthday")}}:</td>\r\n        <td>\r\n          <input type="text" ng-model="user.birthday" ui-date="dateOptions" is-required validator placeholder="{{translate(\'birthdayPlaceholder\')}}">\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <p>Роль:</p>\r\n          <p>({{translate(user.scope)}})</p>\r\n        </td>\r\n        <td>\r\n           <div class="input-wrapper"><input type="radio" id="1" ng-model="user.modifiedScope" value="student"><label for="1">{{translate(\'student\')}} <span class="light" ng-if="user.modifiedScopeStart == \'student\'">({{translate(\'on_moderation\')}})</span></label></div>\r\n           <div class="input-wrapper"><input type="radio" id="2" ng-model="user.modifiedScope" value="teacher"><label for="2">{{translate(\'teacher\')}} <span class="light" ng-if="user.modifiedScopeStart == \'teacher\'">({{translate(\'on_moderation\')}})</span></label></div>\r\n           <div class="input-wrapper"><input type="radio" id="3" ng-model="user.modifiedScope" value="admin"><label for="3">{{translate(\'admin\')}} <span class="light" ng-if="user.modifiedScopeStart == \'admin\'">({{translate(\'on_moderation\')}})</span></label></div>\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    <button ng-click="submitProfile()" class="default">\r\n      <span ng-if="!user.profileSubmitPreloader">{{translate("save")}}</span>\r\n      <span ng-if="user.profileSubmitPreloader" class="button-preloader"></span>\r\n    </button>\r\n    <p class="error" ng-if="user.error" style="margin-top: 10px;">{{user.error}}</p>\r\n  </div>\r\n</div>'),$templateCache.put("/html/register.html",'<div class="wrapper">\r\n  <ul class="breadcrumb">\r\n    <li class="breadcrumb-item"><a href="" ui-sref="main">{{translate("homePage")}}</a></li>\r\n  </ul>\r\n  <h2>{{translate("register")}}</h2>\r\n  <div class="form"  check-form="user.isSubmitted" on-validation-ok=\'register\' >\r\n    <table>\r\n     <!--  <tr>\r\n        <td>{{translate("name")}}:</td>\r\n        <td>\r\n          <input type="text" ng-model="user.name" is-required validator placeholder="{{translate(\'namePlaceholder\')}}">\r\n        </td>\r\n      </tr> -->\r\n      <tr>\r\n        <td>{{translate("email")}}:</td>\r\n        <td>\r\n          <input type="text" ng-model="user.email" is-required validator="email" placeholder="{{translate(\'emailPlaceholder\')}}">\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{translate("password")}}:</td>\r\n        <td>\r\n          <input type="password" ng-model="user.password" is-required validator placeholder="{{translate(\'passwordPlaceholder\')}}">\r\n        </td>\r\n      </tr>\r\n     <!--  <tr>\r\n        <td>{{translate("phone")}}:</td>\r\n        <td>\r\n          <input type="tel" ng-model="user.phone" is-required validator="phoneNumber" placeholder="{{translate(\'phonePlaceholder\')}}">\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>{{translate("birthday")}}:</td>\r\n        <td>\r\n          <input type="text" ng-model="user.date" ui-date="dateOptions" is-required validator placeholder="{{translate(\'birthdayPlaceholder\')}}">\r\n        </td>\r\n      </tr> -->\r\n    </table>\r\n    <button ng-click="submitRegister()" class="default">{{translate("register")}}</button>\r\n  </div>\r\n</div>'),$templateCache.put("/html/solution.html",'<div class="solution" ng-show="!$root.preloader">\r\n  <a ui-sref="^.problem({id: solution.problemId})" class="blue">{{translate(\'back\')}}</a>\r\n  <div class="source" hljs ng-if="solution.solution" language="cpp" source="solution.solution"></div>\r\n  <div class="form">\r\n    <table class="border default">\r\n      <thead>\r\n        <th>{{translate(\'testId\')}}</th>\r\n        <th>{{translate(\'status\')}}</th>\r\n        <th>{{translate(\'execTime\')}}</th>\r\n        <th>{{translate(\'execMemory\')}}</th>\r\n      </thead>\r\n      <tbody>\r\n        <tr ng-repeat="test in solution.tests track by $index" ui-sref="^.solution({solutionId: solution.solutionId})">\r\n          <td><span style="width: 25px;display: inline-block;">{{$index+1}}</span> <img src="assets/img/tick.png"  alt="" ng-if="test.status==\'ok\'" width="13" height="13" ></td>\r\n          <td>{{test.status}}</td>\r\n          <td>{{test.execTime}} ms</td>\r\n          <td>{{floor(test.execMemory/1024)}} kb</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</div>'),$templateCache.put("/html/solutions.html",'<div class="solutions" ng-show="!$root.preloader">\r\n  <table ng-if="solutions.length" class="default">\r\n    <thead>\r\n      <th>{{translate(\'solutionId\')}}</th>\r\n      <!-- <th>{{translate(\'userName\')}}</th> -->\r\n      <th>{{translate(\'problemName\')}}</th>\r\n      <th>{{translate(\'created\')}}</th>\r\n      <th>{{translate(\'lang\')}}</th>\r\n      <th>{{translate(\'status\')}}</th>\r\n    </thead>\r\n    <tbody>\r\n      <tr ng-repeat="solution in solutions" ui-sref="^.solution({id: solution.solutionId})" ng-class="{\'green\': solution.status==\'ok\', \'yellow\': solution.status==\'waiting\', \'red\': (solution.status!=\'ok\'&&solution.status!=\'waiting\')}">\r\n        <td>{{solution.solutionId}}</td>\r\n        <!-- <td ng-click="prevent($event);" ui-sref="cabinet.problem({id: solution.problemId})">{{solution.userName}}</td> -->\r\n        <td ng-click="prevent($event);" ui-sref="cabinet.problem({id: solution.problemId})">{{solution.problemName}}</td>\r\n        <td>{{dateFormat(solution.created)}}</td>\r\n        <td>{{translate(solution.lang)}}</td>\r\n        <td>\r\n          <span ng-if="solution.status!=\'waiting\'">{{solution.status}}</span>\r\n          <span ng-if="solution.status==\'waiting\'">\r\n            <span ng-if="+solution.testPassed">{{translate(\'proceedOnTest\') + " " + solution.testPassed+"/"+solution.testCount}}</span>\r\n            <span ng-if="!+solution.testPassed">{{solution.status}}</span>\r\n          </span>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <div class="pagination" pagination length="pag.length" limit="pag.limit" skip="pag.skip" on-change="getMySolutions" ng-if="solutions.length"></div>\r\n  <p ng-if="!solutions.length && !$root.preloader">{{translate(\'noSolutions\')}} <a ui-sref="^.problems" class="blue">Перейти к списку задач</a></p>\r\n</div>\r\n'),$templateCache.put("/html/solutions_queue.html",'<div class="solutions" ng-show="!$root.preloader">\r\n  <table ng-if="solutions.length" class="default">\r\n    <thead>\r\n      <th>{{translate(\'solutionId\')}}</th>\r\n      <th>{{translate(\'user\')}}</th>\r\n      <th>{{translate(\'problemName\')}}</th>\r\n      <th>{{translate(\'created\')}}</th>\r\n      <th>{{translate(\'lang\')}}</th>\r\n      <th>{{translate(\'status\')}}</th>\r\n    </thead>\r\n    <tbody>\r\n      <tr ng-repeat="solution in solutions" ui-sref="^.solution({id: solution.solutionId})" ng-class="{\'green\': solution.status==\'ok\', \'yellow\': solution.status==\'waiting\', \'red\': (solution.status!=\'ok\'&&solution.status!=\'waiting\')}">\r\n        <td>{{solution.solutionId}}</td>\r\n        <td ng-click="prevent($event);" ui-sref="cabinet.user({id: solution.userId})">{{solution.userName}}</td>\r\n        <td ng-click="prevent($event);" ui-sref="cabinet.problem({id: solution.problemId})">{{solution.problemName}}</td>\r\n        <td>{{dateFormat(solution.created)}}</td>\r\n        <td>{{translate(solution.lang)}}</td>\r\n        <td>\r\n          <span ng-if="solution.status!=\'waiting\'">{{solution.status}}</span>\r\n          <span ng-if="solution.status==\'waiting\'">\r\n            <span ng-if="+solution.testPassed">{{translate(\'proceedOnTest\') + " " + solution.testPassed+"/"+solution.testCount}}</span>\r\n            <span ng-if="!+solution.testPassed">{{solution.status}}</span>\r\n          </span>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <div class="pagination" pagination length="pag.length" limit="pag.limit" skip="pag.skip" on-change="getSolutionsQueue" ng-if="solutions.length"></div>\r\n  <p ng-if="!solutions.length && !$root.preloader">{{translate(\'noSolutions\')}} <a ui-sref="^.problems" class="blue">Перейти к списку задач</a></p>\r\n</div>\r\n'),$templateCache.put("/html/user.html",'<div class="user" ng-if="!$root.preloader">\r\n  <h2>{{userInfo.name}} ({{userInfo.email}})</h2>\r\n  <div class="photo-wrapper">\r\n    <i class="fa fa-user-o" id="user"></i>\r\n  </div>\r\n  <table>\r\n    <tr ng-if="userInfo.birthday">\r\n      <td>Дата рождения</td>\r\n      <td >{{dateFormat(userInfo.birthday, \'date\')}}</td>\r\n    </tr>\r\n\r\n    <tr ng-if="userInfo.created">\r\n      <td>Зарегистрирован</td>\r\n      <td >{{dateFormat(userInfo.created, \'date\')}}</td>\r\n    </tr>\r\n    \r\n    <tr ng-if="userInfo.phone">\r\n      <td>Номер телефона</td>\r\n      <td >{{userInfo.phone}}</td>\r\n    </tr>\r\n\r\n    \r\n    \r\n    <tr ng-if="userInfo.totalSolutionsCount">\r\n      <td>Всего отправок</td>\r\n      <td >{{userInfo.totalSolutionsCount}}</td>\r\n    </tr>\r\n\r\n    <tr ng-if="userInfo.successSolutionsCount">\r\n      <td>Успешных отправок</td>\r\n      <td >{{userInfo.successSolutionsCount}}</td>\r\n    </tr>\r\n\r\n    \r\n\r\n    <tr ng-if="userInfo.successUniqueSolutionsCount">\r\n      <td>Решено задач</td>\r\n      <td >{{userInfo.successUniqueSolutionsCount}}</td>\r\n    </tr>\r\n\r\n\r\n    <tr ng-if="userInfo.note">\r\n      <td>Дополнительная информация</td>\r\n      <td >{{userInfo.note}}</td>\r\n    </tr>\r\n  </table>\r\n</div>')}]);